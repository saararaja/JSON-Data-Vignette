---
title: "JSON Data - A Vignette by Saara Raja"
output: 
  github_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
```

## JSON Data
Text to Go Here

## Reading JSON Data into R
Text to Go Here

## Connect to NHL Data


```{r Package_reads, echo=FALSE}
library(httr)
library(jsonlite)
library(tidyverse)
library(tidyjson)
```


```{r Read_In_functions}

base <- "https://records.nhl.com/site/api"

franch_func <- function(){
  
  #url ending
  endpoint <- "/franchise"
  
  #Create the url & read in the data 
  call1 <- paste0(base, endpoint)
  get_franchise <- GET(call1)
  get_franchise_text <- content(get_franchise, "text")
  
  #use tidyjson to convert the data into a useable dataframe
  franchise_prelim <- get_franchise_text %>% enter_object(data) %>%
                      gather_array %>% spread_all
  franchise <- as_tibble(franchise_prelim) 
  franchise <- franchise %>% select(id, firstSeasonId, lastSeasonId, teamCommonName)
  return(franchise)
}
```

```{r}
franchise <- franch_func() 
franchise
```

